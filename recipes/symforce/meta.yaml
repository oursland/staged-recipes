{% set name = "symforce" %}
{% set version = "0.9.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/symforce-org/{{ name }}/archive/v{{ version }}.tar.gz
  sha256: fdee9556fba9ef6a49adb2315f670d4c4c790db36f46f90ee7edf4534e28852e

build:
  number: 0
  skip: true  # [win]
  skip: true  # [py==311]
  skip: true  # [py==312]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - ninja
    - pip
    - python
    - argh
    - cmake>=3.17,<3.27
    - cython>=0.19.1,<3
    - eigen >=3.3
    - fmt >=8.0,<9.0
    - jinja2~=3.0.3
    - numpy==1.26.0
    - ply
    - python
    - six
    - spdlog >=1.9,<=1.10
    - sympy
    - tl-optional
    - types-jinja2
    - types-pygments
    - types-requests
    - types-setuptools

  host:
    - argh
    - cmake>=3.17,<3.27
    - cython>=0.19.1,<3
    - eigen >=3.3
    - fmt >=8.0,<9.0
    - jinja2~=3.0.3
    - numpy==1.26.0
    - ply
    - python
    - six
    - spdlog >=1.9,<=1.10
    - sympy
    - tl-optional
    - types-jinja2
    - types-pygments
    - types-requests
    - types-setuptools

  run:
    - black
    - clang-format
    - eigen >=3.3
    - fmt >=8.0,<9.0
    - graphviz
    - jinja2~=3.0.3
    - matplotlib
    - numpy==1.26.0
    - ply
    - python
    - python-graphviz
    - spdlog >=1.9,<=1.10
    - sympy
    - tl-optional

# test:
#   commands:
#     - test -f ${PREFIX}/include/symforce/opt/key.h  # [unix]

about:
  home: https://github.com/symforce-org/symforce
  summary: 'Fast symbolic computation, code generation, and nonlinear optimization for robotics'
  description: |
    SymForce is a fast symbolic computation and code generation library for robotics applications like computer vision, state estimation, motion planning, and controls. It combines the development speed and flexibility of symbolic mathematics with the performance of autogenerated, highly optimized code in C++ or any target runtime language.
  license: Apache v2
  license_family: Apache
  license_file: LICENSE
  doc_url: https://symforce.org/
  dev_url: https://github.com/symforce-org/symforce

extra:
  recipe-maintainers:
    - aaron-skydio
    - chao-qu-skydio
    - hayk-skydio
